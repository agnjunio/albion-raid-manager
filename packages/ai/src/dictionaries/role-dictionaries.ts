import { RaidRole } from "@albion-raid-manager/types";

import { detectLanguages, type MultiLanguageDictionary } from "./index";

export type RoleDictionary = {
  [role in RaidRole]: {
    role: string;
    confidence: number;
    patterns: string[];
  };
};

const ROLE_DICTIONARIES: MultiLanguageDictionary<RoleDictionary> = {
  en: {
    TANK: {
      role: "TANK",
      confidence: 0.95,
      patterns: [
        "tank",
        "guardian",
        "stopper",
        "protector",
        "defender",
        "stone golem",
        "golem",
        "earthrune",
        "bear",
        "primal",
        "caller",
        "shot caller",
        "raid leader",
        "leader",
        "hammer",
        "mace",
        "crystal mace",
        "morning star",
        "incubus",
        "camlann",
        "monarch",
        "dreadstorm monarch",
      ],
    },
    HEALER: {
      role: "HEALER",
      confidence: 0.95,
      patterns: ["healer", "holy", "nature", "cleric", "priest", "druid"],
    },
    RANGED_DPS: {
      role: "RANGED_DPS",
      confidence: 0.95,
      patterns: [
        "fire",
        "fireball",
        "infernal",
        "blazing",
        "flame",
        "frost",
        "ice",
        "glacial",
        "frozen",
        "cold",
        "arcane",
        "song",
        "astral",
        "mystic",
        "enigmatic",
        "crossbow",
        "light crossbow",
        "heavy crossbow",
        "arbalest",
        "ballista",
        "bow",
        "longbow",
        "shortbow",
        "warbow",
        "composite bow",
        "phoenix",
        "lightcaller",
        "imp",
        "hellspawn",
      ],
    },
    SUPPORT: {
      role: "SUPPORT",
      confidence: 0.8,
      patterns: [
        "cursed",
        "cursed staff",
        "demonic",
        "shadow",
        "support",
        "utility",
        "buffer",
        "debuffer",
        "time",
        "monarch",
        "ent",
        "rootbound",
        "crystal cobra",
        "stillgaze",
      ],
    },
    MELEE_DPS: {
      role: "MELEE_DPS",
      confidence: 0.9,
      patterns: [
        "spear",
        "pike",
        "glaive",
        "lance",
        "halberd",
        "sword",
        "broadsword",
        "claymore",
        "rapier",
        "katana",
        "axe",
        "greataxe",
        "battleaxe",
        "halberd",
        "tomahawk",
        "hammer",
        "greathammer",
        "polehammer",
        "maul",
        "warhammer",
        "mace",
        "morning star",
        "flail",
        "club",
        "morgenstern",
        "fist",
        "fists",
        "knuckle",
        "knuckles",
        "gauntlet",
        "claw",
        "dagger",
        "bloodletter",
        "deathgivers",
        "stiletto",
        "kris",
        "wolf",
        "bloodmoon",
        "panther",
        "prowling",
      ],
    },
    CALLER: {
      role: "CALLER",
      confidence: 0,
      patterns: [],
    },
    BATTLEMOUNT: {
      role: "BATTLEMOUNT",
      confidence: 0,
      patterns: [],
    },
  },
  pt: {
    TANK: {
      role: "TANK",
      confidence: 0.95,
      patterns: [
        "tanque",
        "guardiao",
        "guardião",
        "caller",
        "lider",
        "líder",
        "lider",
        "líder de raid",
        "lider de raid",
        "lider do grupo",
        "comandante",
        "chamador",
        "protetor",
        "defensor",
        "main tank",
        "mt",
        "martelo",
        "malho",
        "maça",
        "maca",
        "monarca",
        "monarca tempestuoso",
        "crystal mace",
      ],
    },
    HEALER: {
      role: "HEALER",
      confidence: 0.95,
      patterns: ["healer", "redenção", "redencao", "sagrado", "queda", "curandeiro", "sacerdote"],
    },
    RANGED_DPS: {
      role: "RANGED_DPS",
      confidence: 0.95,
      patterns: [
        "fogo",
        "fulgurante",
        "infernal",
        "ardente",
        "chama",
        "gelo",
        "ártico",
        "artico",
        "glacial",
        "congelado",
        "arcano",
        "canção",
        "cancao",
        "astral",
        "místico",
        "besta",
        "besta leve",
        "besta pesada",
        "arbalesta",
        "balista",
        "arco",
        "arco longo",
        "arco curto",
        "arco de guerra",
        "arco composto",
        "fb",
        "fura bruma",
        "pútrido",
        "putrido",
      ],
    },
    SUPPORT: {
      role: "SUPPORT",
      confidence: 0.8,
      patterns: [
        "maldito",
        "demoníaco",
        "sombra",
        "suporte",
        "utilidade",
        "buffer",
        "debuffer",
        "tempo",
        "monarca",
        "paratempo",
        "para tempo",
      ],
    },
    MELEE_DPS: {
      role: "MELEE_DPS",
      confidence: 0.9,
      patterns: [
        "lança",
        "lanca",
        "pique",
        "glaive",
        "alabarda",
        "garceira",
        "garceiro",
        "espada",
        "claymore",
        "rapier",
        "katana",
        "sabre",
        "machado",
        "machadão",
        "machadao",
        "batalha",
        "alabarda",
        "tomahawk",
        "estrela da manhã",
        "mangual",
        "clava",
        "punhos",
        "punho",
        "soco",
        "socos",
        "manopla",
        "garra",
        "adaga",
        "sangrador",
        "doadores da morte",
        "stiletto",
        "kris",
      ],
    },
    CALLER: {
      role: "CALLER",
      confidence: 0,
      patterns: [],
    },
    BATTLEMOUNT: {
      role: "",
      confidence: 0,
      patterns: [],
    },
  },
  es: {
    TANK: {
      role: "TANK",
      confidence: 0.95,
      patterns: ["tanque", "guardian", "defensor", "maza", "líder", "comandante", "chamador", "líder de raid"],
    },
    HEALER: {
      role: "HEALER",
      confidence: 0.95,
      patterns: ["sanador", "sagrado", "curación", "sacerdote", "druida"],
    },
    RANGED_DPS: {
      role: "RANGED_DPS",
      confidence: 0.95,
      patterns: [
        "fuego",
        "infernal",
        "ardiente",
        "llama",
        "fulgurante",
        "hielo",
        "ártico",
        "glacial",
        "congelado",
        "frío",
        "arcano",
        "canción",
        "astral",
        "místico",
        "enigmático",
        "ballesta",
        "ballesta ligera",
        "ballesta pesada",
        "arbalesta",
        "balista",
        "arco",
        "arco largo",
        "arco corto",
        "arco de guerra",
        "arco compuesto",
      ],
    },
    SUPPORT: {
      role: "SUPPORT",
      confidence: 0.8,
      patterns: [
        "maldito",
        "pútrido",
        "demoníaco",
        "sombra",
        "corrupto",
        "soporte",
        "utilidad",
        "buffer",
        "debuffer",
        "tiempo",
        "monarca",
      ],
    },
    MELEE_DPS: {
      role: "MELEE_DPS",
      confidence: 0.9,
      patterns: [
        "lanza",
        "pica",
        "glaive",
        "alabarda",
        "partesana",
        "espada",
        "claymore",
        "espada ropera",
        "katana",
        "sable",
        "hacha",
        "gran hacha",
        "hacha de batalla",
        "alabarda",
        "tomahawk",
        "martillo",
        "gran martillo",
        "maza",
        "martillo de guerra",
        "maza",
        "estrella de la mañana",
        "mangual",
        "garrote",
        "morgenstern",
        "puños",
        "puño",
        "golpe",
        "golpes",
        "guantelete",
        "garra",
        "daga",
        "sangrador",
        "dadores de muerte",
        "estilete",
        "kris",
      ],
    },
    CALLER: {
      role: "",
      confidence: 0,
      patterns: [],
    },
    BATTLEMOUNT: {
      role: "BATTLEMOUNT",
      confidence: 0,
      patterns: [],
    },
  },
  ru: {
    TANK: {
      role: "TANK",
      confidence: 0.95,
      patterns: ["танк", "защитник", "страж", "щит"],
    },
    HEALER: {
      role: "HEALER",
      confidence: 0.95,
      patterns: ["лекарь", "святой", "природный", "жрец", "друид"],
    },
    RANGED_DPS: {
      role: "RANGED_DPS",
      confidence: 0.95,
      patterns: [
        "огонь",
        "огненный",
        "адский",
        "пылающий",
        "пламя",
        "лед",
        "арктический",
        "ледяной",
        "замороженный",
        "холодный",
        "тайный",
        "песня",
        "астральный",
        "мистический",
        "загадочный",
        "арбалет",
        "легкий арбалет",
        "тяжелый арбалет",
        "арбалет",
        "баллиста",
        "лук",
        "длинный лук",
        "короткий лук",
        "боевой лук",
        "составной лук",
      ],
    },
    SUPPORT: {
      role: "SUPPORT",
      confidence: 0.8,
      patterns: [
        "проклятый",
        "гнилой",
        "демонический",
        "тень",
        "испорченный",
        "поддержка",
        "полезность",
        "баффер",
        "дебаффер",
        "время",
        "монарх",
      ],
    },
    MELEE_DPS: {
      role: "MELEE_DPS",
      confidence: 0.9,
      patterns: [
        "копье",
        "пика",
        "глефа",
        "алебарда",
        "протазан",
        "меч",
        "клеймор",
        "рапира",
        "катана",
        "сабля",
        "топор",
        "большой топор",
        "боевой топор",
        "алебарда",
        "томагавк",
        "молот",
        "большой молот",
        "кувалда",
        "боевой молот",
        "булава",
        "утренняя звезда",
        "цеп",
        "дубина",
        "моргенштерн",
        "кулак",
        "кулаки",
        "кастет",
        "кастеты",
        "перчатка",
        "коготь",
        "кинжал",
        "кровопускатель",
        "дарители смерти",
        "стилет",
        "крис",
      ],
    },
    CALLER: {
      role: "CALLER",
      confidence: 0,
      patterns: [],
    },
    BATTLEMOUNT: {
      role: "BATTLEMOUNT",
      confidence: 0,
      patterns: [],
    },
  },
  zh: {
    TANK: {
      role: "TANK",
      confidence: 0.95,
      patterns: ["坦克", "守护者", "防御者", "盾牌"],
    },
    HEALER: {
      role: "HEALER",
      confidence: 0.95,
      patterns: ["治疗师", "神圣", "自然", "牧师", "德鲁伊"],
    },
    RANGED_DPS: {
      role: "RANGED_DPS",
      confidence: 0.95,
      patterns: [
        "火焰",
        "火球",
        "地狱",
        "燃烧",
        "烈焰",
        "冰霜",
        "冰",
        "冰川",
        "冰冻",
        "寒冷",
        "奥术",
        "歌曲",
        "星界",
        "神秘",
        "谜团",
        "弩",
        "轻弩",
        "重弩",
        "弩",
        "弩炮",
        "弓",
        "长弓",
        "短弓",
        "战弓",
        "复合弓",
      ],
    },
    SUPPORT: {
      role: "SUPPORT",
      confidence: 0.8,
      patterns: ["诅咒", "腐烂", "恶魔", "阴影", "腐败", "支援", "实用", "增益", "减益", "时间", "君主"],
    },
    MELEE_DPS: {
      role: "MELEE_DPS",
      confidence: 0.9,
      patterns: [
        "长矛",
        "长枪",
        "战戟",
        "戟",
        "方天画戟",
        "剑",
        "大剑",
        "细剑",
        "武士刀",
        "军刀",
        "斧头",
        "巨斧",
        "战斧",
        "戟",
        "战斧",
        "锤子",
        "大锤",
        "重锤",
        "战锤",
        "钉锤",
        "晨星",
        "连枷",
        "棍棒",
        "晨星锤",
        "拳头",
        "拳",
        "指虎",
        "指虎",
        "护手",
        "爪子",
        "匕首",
        "放血者",
        "死亡给予者",
        "短剑",
        "克里斯",
      ],
    },
    CALLER: {
      role: "CALLER",
      confidence: 0,
      patterns: [],
    },
    BATTLEMOUNT: {
      role: "BATTLEMOUNT",
      confidence: 0,
      patterns: [],
    },
  },
  fr: {
    TANK: {
      role: "TANK",
      confidence: 0.95,
      patterns: ["tank", "gardien", "défenseur", "protecteur"],
    },
    HEALER: {
      role: "HEALER",
      confidence: 0.95,
      patterns: ["guérisseur", "saint", "nature", "prêtre", "druide"],
    },
    RANGED_DPS: {
      role: "RANGED_DPS",
      confidence: 0.95,
      patterns: [
        "feu",
        "infernal",
        "ardent",
        "flamme",
        "brûlant",
        "gel",
        "arctique",
        "glacial",
        "gelé",
        "froid",
        "arcane",
        "chanson",
        "astral",
        "mystique",
        "énigmatique",
        "arbalète",
        "arbalète légère",
        "arbalète lourde",
        "arbalète",
        "baliste",
        "arc",
        "arc long",
        "arc court",
        "arc de guerre",
        "arc composite",
      ],
    },
    SUPPORT: {
      role: "SUPPORT",
      confidence: 0.8,
      patterns: [
        "maudit",
        "pourri",
        "démoniaque",
        "ombre",
        "corrompu",
        "soutien",
        "utilité",
        "buffer",
        "debuffer",
        "temps",
        "monarque",
      ],
    },
    MELEE_DPS: {
      role: "MELEE_DPS",
      confidence: 0.9,
      patterns: [
        "lance",
        "pique",
        "glaive",
        "hallebarde",
        "pertuisane",
        "épée",
        "claymore",
        "rapière",
        "katana",
        "sabre",
        "hache",
        "grande hache",
        "hache de bataille",
        "hallebarde",
        "tomahawk",
        "marteau",
        "grand marteau",
        "maillet",
        "marteau de guerre",
        "masse",
        "étoile du matin",
        "fléau",
        "gourdin",
        "morgenstern",
        "poing",
        "poings",
        "brassard",
        "brassards",
        "gantelet",
        "griffe",
        "dague",
        "saigneur",
        "donneurs de mort",
        "stiletto",
        "kris",
      ],
    },
    CALLER: {
      role: "CALLER",
      confidence: 0,
      patterns: [],
    },
    BATTLEMOUNT: {
      role: "BATTLEMOUNT",
      confidence: 0,
      patterns: [],
    },
  },
  de: {
    TANK: {
      role: "TANK",
      confidence: 0.95,
      patterns: ["panzer", "wächter", "verteidiger", "schutz"],
    },
    HEALER: {
      role: "HEALER",
      confidence: 0.95,
      patterns: ["heiler", "heilig", "natur", "priester", "druide"],
    },
    RANGED_DPS: {
      role: "RANGED_DPS",
      confidence: 0.95,
      patterns: [
        "feuer",
        "höllenfeuer",
        "brennend",
        "flamme",
        "glühend",
        "frost",
        "arktisch",
        "eisig",
        "gefroren",
        "kalt",
        "arkan",
        "lied",
        "astral",
        "mystisch",
        "rätselhaft",
        "armbrust",
        "leichte armbrust",
        "schwere armbrust",
        "armbrust",
        "balliste",
        "bogen",
        "langbogen",
        "kurzbogen",
        "kriegsbogen",
        "kompositbogen",
      ],
    },
    SUPPORT: {
      role: "SUPPORT",
      confidence: 0.8,
      patterns: [
        "verflucht",
        "verfault",
        "dämonisch",
        "schatten",
        "korrupt",
        "unterstützung",
        "nützlichkeit",
        "buffer",
        "debuffer",
        "zeit",
        "monarch",
      ],
    },
    MELEE_DPS: {
      role: "MELEE_DPS",
      confidence: 0.9,
      patterns: [
        "speer",
        "pike",
        "gleve",
        "hellebarde",
        "partisane",
        "schwert",
        "claymore",
        "rapier",
        "katana",
        "säbel",
        "axt",
        "große axt",
        "kampfaxt",
        "hellebarde",
        "tomahawk",
        "hammer",
        "großer hammer",
        "vorschlaghammer",
        "kriegshammer",
        "streitkolben",
        "morgenstern",
        "flegel",
        "keule",
        "morgenstern",
        "faust",
        "fäuste",
        "schlagring",
        "schlagringe",
        "panzerhandschuh",
        "klaue",
        "dolch",
        "aderlass",
        "todbringer",
        "stilett",
        "kris",
      ],
    },
    CALLER: {
      role: "CALLER",
      confidence: 0,
      patterns: [],
    },
    BATTLEMOUNT: {
      role: "BATTLEMOUNT",
      confidence: 0,
      patterns: [],
    },
  },
  ja: {
    TANK: {
      role: "TANK",
      confidence: 0.95,
      patterns: ["タンク", "ガーディアン", "守護者", "防御者"],
    },
    HEALER: {
      role: "HEALER",
      confidence: 0.95,
      patterns: ["ヒーラー", "聖なる", "自然", "司祭", "ドルイド"],
    },
    RANGED_DPS: {
      role: "RANGED_DPS",
      confidence: 0.95,
      patterns: [
        "炎",
        "火球",
        "地獄",
        "燃える",
        "炎",
        "霜",
        "氷",
        "氷河",
        "凍った",
        "寒い",
        "秘術",
        "歌",
        "星界",
        "神秘",
        "謎",
        "クロスボウ",
        "軽いクロスボウ",
        "重いクロスボウ",
        "アーバレスト",
        "バリスタ",
        "弓",
        "長弓",
        "短弓",
        "戦弓",
        "複合弓",
      ],
    },
    SUPPORT: {
      role: "SUPPORT",
      confidence: 0.8,
      patterns: [
        "呪われた",
        "腐った",
        "悪魔の",
        "影",
        "腐敗した",
        "サポート",
        "ユーティリティ",
        "バッファー",
        "デバッファー",
        "時間",
        "君主",
      ],
    },
    MELEE_DPS: {
      role: "MELEE_DPS",
      confidence: 0.9,
      patterns: [
        "槍",
        "槍",
        "グレイブ",
        "ハルバード",
        "パルチザン",
        "剣",
        "クレイモア",
        "レイピア",
        "刀",
        "サーベル",
        "斧",
        "大斧",
        "戦斧",
        "ハルバード",
        "トマホーク",
        "ハンマー",
        "大ハンマー",
        "大槌",
        "戦鎚",
        "メイス",
        "モーニングスター",
        "フレイル",
        "クラブ",
        "モルゲンシュテルン",
        "拳",
        "拳",
        "ナックル",
        "ナックル",
        "ガントレット",
        "爪",
        "短剣",
        "ブラッドレター",
        "デスギバー",
        "スティレット",
        "クリス",
      ],
    },
    CALLER: {
      role: "CALLER",
      confidence: 0,
      patterns: [],
    },
    BATTLEMOUNT: {
      role: "BATTLEMOUNT",
      confidence: 0,
      patterns: [],
    },
  },
  ko: {
    TANK: {
      role: "TANK",
      confidence: 0.95,
      patterns: ["탱크", "가디언", "방어자", "보호자"],
    },
    HEALER: {
      role: "HEALER",
      confidence: 0.95,
      patterns: ["치유사", "성스러운", "자연", "사제", "드루이드"],
    },
    RANGED_DPS: {
      role: "RANGED_DPS",
      confidence: 0.95,
      patterns: [
        "불",
        "화구",
        "지옥",
        "타오르는",
        "화염",
        "서리",
        "얼음",
        "빙하",
        "얼린",
        "차가운",
        "비전",
        "노래",
        "성계",
        "신비한",
        "수수께끼",
        "석궁",
        "가벼운 석궁",
        "무거운 석궁",
        "아발레스트",
        "발리스타",
        "활",
        "장궁",
        "단궁",
        "전투활",
        "복합활",
        "dps",
        "데미지",
        "공격자",
        "스트라이커",
        "슬레이어",
      ],
    },
    SUPPORT: {
      role: "SUPPORT",
      confidence: 0.8,
      patterns: [
        "저주받은",
        "썩은",
        "악마의",
        "그림자",
        "부패한",
        "지원",
        "유틸리티",
        "버퍼",
        "디버퍼",
        "시간",
        "군주",
      ],
    },
    MELEE_DPS: {
      role: "MELEE_DPS",
      confidence: 0.9,
      patterns: [
        "창",
        "창",
        "글레이브",
        "할버드",
        "파르티잔",
        "검",
        "클레이모어",
        "레이피어",
        "카타나",
        "세이버",
        "도끼",
        "대도끼",
        "전투도끼",
        "할버드",
        "토마호크",
        "망치",
        "대망치",
        "큰망치",
        "전투망치",
        "메이스",
        "모닝스타",
        "플레일",
        "클럽",
        "모르겐슈테른",
        "주먹",
        "주먹",
        "너클",
        "너클",
        "건틀릿",
        "발톱",
        "단검",
        "블러드레터",
        "데스기버",
        "스틸레토",
        "크리스",
        "quarter",
        "quarterstaff",
        "지팡이",
        "막대",
        "로드",
      ],
    },
    CALLER: {
      role: "CALLER",
      confidence: 0,
      patterns: [],
    },
    BATTLEMOUNT: {
      role: "BATTLEMOUNT",
      confidence: 0,
      patterns: [],
    },
  },
};

export function getRoleDictionaryForText(text: string): RoleDictionary {
  const detectedLanguages = detectLanguages(text);

  if (detectedLanguages.length === 0) {
    return ROLE_DICTIONARIES.en;
  }

  const combinedDictionary: RoleDictionary = {
    TANK: {
      role: "TANK",
      confidence: 0.95,
      patterns: [],
    },
    HEALER: {
      role: "HEALER",
      confidence: 0.95,
      patterns: [],
    },
    RANGED_DPS: {
      role: "RANGED_DPS",
      confidence: 0.95,
      patterns: [],
    },
    SUPPORT: {
      role: "SUPPORT",
      confidence: 0.8,
      patterns: [],
    },
    MELEE_DPS: {
      role: "MELEE_DPS",
      confidence: 0.9,
      patterns: [],
    },
    CALLER: {
      role: "CALLER",
      confidence: 0.95,
      patterns: [],
    },
    BATTLEMOUNT: {
      role: "BATTLEMOUNT",
      confidence: 0.95,
      patterns: [],
    },
  };

  detectedLanguages.forEach((detectedLanguage) => {
    const langKeywords = ROLE_DICTIONARIES[detectedLanguage.language] || ROLE_DICTIONARIES.en;
    for (const role in combinedDictionary) {
      combinedDictionary[role as RaidRole].patterns.push(...langKeywords[role as RaidRole].patterns);
    }
  });

  for (const role in combinedDictionary) {
    combinedDictionary[role as RaidRole].patterns = [...new Set(combinedDictionary[role as RaidRole].patterns)];
  }

  return combinedDictionary;
}
